# Coco-Ai バックエンド (Python / Cloud Run / ADK)

> Google Cloud Japan AI Hackathon vol.3 応募作品

このディレクトリは、親子対話AI「Coco-Ai」のバックエンドアプリケーションです。
Cloud Run上で動作するPythonで構築されており、中核的なAI処理を担います。

## 役割

このバックエンドは、Cloud Storageへのファイルアップロードを**Eventarc**が検知することをトリガーとして起動され、複雑なAI処理を実行する「専門家の作業場」です。

-   **AIエージェントシステム**: Agents Development Kit (ADK) を用いて、複数のAIエージェントが協調して動作するシステムを構築しています。
-   **マルチモーダル処理**: Google Cloudの最新AI APIを活用し、音声・テキスト・画像を統合したリッチな応答を生成します。
    -   **Speech-to-Text**: 子供の音声をテキストに変換します。
    -   **Gemini API**: テキスト化された質問の意図を理解し、子供向けの解説と親向けのヒントを生成します。
    -   **Imagen API**: 解説に合わせたイラストをリアルタイムで生成します。
    -   **Text-to-Speech**: 生成された解説文を自然な音声で読み上げます。
-   **Firebase連携**: Eventarcから受け取ったイベント情報（ファイルメタデータに含まれるジョブIDなど）を元に、処理の進捗や結果をFirestoreに書き込みます。生成した成果物（画像、音声ファイル）はCloud Storageに保存します。

## AIエージェント構成

-   **受付・通訳エージェント**: 子供のあいまいな発音も正確にテキスト化します。
-   **対話・解説エージェント**: 質問の意図を汲み取り、子供の年齢に合わせた回答、イラスト指示、そして親向けヒントを生成する司令塔です。
-   **イラストレーターエージェント**: 解説内容を補足する、わかりやすく可愛いイラストをその場で生成します。
-   **ナレーターエージェント**: 解説文を優しく温かみのある声で読み上げます。